<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title><%= page.title %></title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
      :root {
        --page-bg: <%= page.design?.backgroundColor || '#000000' %>;
        --page-text: <%= page.design?.textColor || '#ffffff' %>;
        --page-font: '<%= page.design?.fontFamily || 'Inter' %>';
        --page-max-width: <%= page.design?.maxWidth || 768 %>px;
      }
      .page-content {
        background-color: var(--page-bg);
        color: var(--page-text);
        font-family: var(--page-font);
      }
      .content-container {
        max-width: var(--page-max-width);
        margin-left: auto;
        margin-right: auto;
      }
    </style>
    <% if (page.design?.customCSS) { %>
    <style>
      <%= page.design.customCSS %>
    </style>
    <% } %>
</head>
<body>
    <div class="min-h-screen page-content">
      <div class="content-container px-4 py-8">
        <div class="<%= page.design?.layout === 'left-aligned' ? 'text-left' : (page.design?.layout === 'right-aligned' ? 'text-right' : 'text-center') %>">
          <% if (page.design?.logo) { %>
            <div class="mb-8 <%= page.design?.layout === 'left-aligned' ? '' : (page.design?.layout === 'right-aligned' ? 'flex justify-end' : 'flex justify-center') %>">
              <img src="<%= page.design.logo %>" 
                   alt="<%= page.title %> Logo" 
                   style="width: <%= page.design?.logoSize?.width || 200 %>px; height: <%= page.design?.logoSize?.height || 50 %>px; object-fit: contain;">
            </div>
          <% } %>

          <h1 class="text-4xl font-bold mb-4"><%= page.title %></h1>
          <div class="mb-8 opacity-80">
            <p class="text-xl"><%= page.description %></p>
          </div>

          <div class="prose max-w-none" style="color: inherit;">
            <div class="whitespace-pre-wrap"><%= page.content %></div>
          </div>

          <div class="mt-8 pt-6 border-t opacity-60 text-sm">
            Last updated: <%= new Date(page.updatedAt).toLocaleDateString() %>
          </div>
        </div>
      </div>
    </div>

    <div class="fixed bottom-4 right-4">
      <a href="/pages/<%= page._id %>" class="text-gray-600 hover:text-gray-800 bg-white px-4 py-2 rounded-lg shadow-lg">
        Back to Page Details
      </a>
    </div>
</body>
</html>